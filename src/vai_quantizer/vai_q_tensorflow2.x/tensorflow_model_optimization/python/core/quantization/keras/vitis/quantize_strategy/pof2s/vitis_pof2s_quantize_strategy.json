{
  "optimize_pipeline_config":
  {
    "remove_dropout": true,
    "separate_conv_act": true,
    "fold_conv_bn": true,
    "convert_bn_to_dwconv": true,
    "convert_relu6_to_relu": false,
    "convert_tf_op_to_keras": true,
    "include_cle": true,
    "cle_to_relu6": false,
    "cle_steps": 10,
    "cle_balance_method": "max",
    "cle_weight_threshold": 0.1,
    "train_with_bn": false,
    "separable_conv": true
  },

  "quantize_pipeline_config":
  {
    "convert_datatype":"",
    "convert_sigmoid_to_hard_sigmoid": true,
    "convert_hard_sigmoid_to_dpu_version": true,
    "convert_average_pooling2d_to_dpu_version": true,
    "convert_leaky_relu_to_dpu_version": true,
    "freeze_bn_delay": -1,
    "quantize_with_xcompiler": true
  },

  "refine_pipeline_config":
  {
    "adjust_dpu_sigmoid": true,
    "adjust_dpu_shift_cut": true,
    "adjust_dpu_shift_bias": true,
    "adjust_dpu_shift_bias_leakyrelu": true,
    "adjust_dpu_shift_read": true,
    "adjust_dpu_shift_write": true,
    "adjust_dpu_shift_swish": true,
    "align_concat": true,
    "align_pool": true,
    "include_fast_ft": false,
    "fast_ft_epochs": 10,
    "include_bias_corr": false,
    "convert_to_fs_quantize_strategy": false
  },

  "finalize_pipeline_config":
  {
    "output_format": "",
    "onnx_opset_version": 11,
    "output_dir": "./quantize_results/"
  },

  "quantize_registry_config":
  {
    "user_quantize_config":
    {
      "input_bit": null,
      "input_method": null,
      "input_symmetry": null,
      "input_per_channel": null,
      "input_round_mode": null,
      "input_unsigned": null,
      "weight_bit": null,
      "weight_method": null,
      "weight_symmetry": null,
      "weight_per_channel": null,
      "weight_round_mode": null,
      "weight_unsigned": null,
      "bias_bit": null,
      "bias_method": null,
      "bias_symmetry": null,
      "bias_per_channel": null,
      "bias_round_mode": null,
      "bias_unsigned": null,
      "activation_bit": null,
      "activation_method": null,
      "activation_symmetry": null,
      "activation_per_channel": null,
      "activation_round_mode": null,
      "activation_unsigned": null,
      "use_framework_quant": null,
      "input_layers": [],
      "output_layers": [],
      "ignore_layers": []
    },
    "custom_layer_type": [],
    "input_quantize_config":
    {
      "input_layers": [],
      "input_quantizer":
      {
        "quantizer_type": "Pof2SQuantizer",
        "quantizer_params": {"bit_width": 8, "method": 0, "round_mode": 1, "symmetry": true, "per_channel": false, "channel_axis": -1, "unsigned": false, "narrow_range": false}
      }
    },

    "layer_quantize_config":
    [
      {
        "layer_type": "tensorflow.keras.layers.Conv2D",
        "quantizable_weights": ["kernel"],
        "weight_quantizers": [
          {
            "quantizer_type": "Pof2SQuantizer",
            "quantizer_params": {"bit_width": 8, "method": 1, "round_mode": 0, "symmetry": true, "per_channel": false, "channel_axis": -1, "unsigned": false, "narrow_range": false}
          }
        ],
        "quantizable_biases": ["bias"],
        "bias_quantizers": [
          {
            "quantizer_type": "Pof2SQuantizer",
            "quantizer_params": {"bit_width": 8, "method": 1, "round_mode": 0, "symmetry": true, "per_channel": false, "channel_axis": -1, "unsigned": false, "narrow_range": false}
          }
        ],
        "quantizable_activations": ["activation"],
        "activation_quantizers": [
          {
            "quantizer_type": "Pof2SQuantizer",
            "quantizer_params": {"bit_width": 8, "method": 1, "round_mode": 1, "symmetry": true, "per_channel": false, "channel_axis": -1, "unsigned": false, "narrow_range": false}
          }
        ]
      },

      {
        "layer_type": "tensorflow.keras.layers.DepthwiseConv2D",
        "quantizable_weights": ["depthwise_kernel"],
        "weight_quantizers": [
          {
            "quantizer_type": "Pof2SQuantizer",
            "quantizer_params": {"bit_width": 8, "method": 1, "round_mode": 0, "symmetry": true, "per_channel": false, "channel_axis": 2, "unsigned": false, "narrow_range": false}
          }
        ],
        "quantizable_biases": ["bias"],
        "bias_quantizers": [
          {
            "quantizer_type": "Pof2SQuantizer",
            "quantizer_params": {"bit_width": 8, "method": 1, "round_mode": 0, "symmetry": true, "per_channel": false, "channel_axis": -1, "unsigned": false, "narrow_range": false}
          }
        ],
        "quantizable_activations": ["activation"],
        "activation_quantizers": [
          {
            "quantizer_type": "Pof2SQuantizer",
            "quantizer_params": {"bit_width": 8, "method": 1, "round_mode": 1, "symmetry": true, "per_channel": false, "channel_axis": -1, "unsigned": false, "narrow_range": false}
          }
        ]
      },

      {
        "layer_type": "tensorflow.keras.layers.Conv2DTranspose",
        "quantizable_weights": ["kernel"],
        "weight_quantizers": [
          {
            "quantizer_type": "Pof2SQuantizer",
            "quantizer_params": {"bit_width": 8, "method": 1, "round_mode": 0, "symmetry": true, "per_channel": false, "channel_axis": -1, "unsigned": false, "narrow_range": false}
          }
        ],
        "quantizable_biases": ["bias"],
        "bias_quantizers": [
          {
            "quantizer_type": "Pof2SQuantizer",
            "quantizer_params": {"bit_width": 8, "method": 1, "round_mode": 0, "symmetry": true, "per_channel": false, "channel_axis": -1, "unsigned": false, "narrow_range": false}
          }
        ],
        "quantizable_activations": ["activation"],
        "activation_quantizers": [
          {
            "quantizer_type": "Pof2SQuantizer",
            "quantizer_params": {"bit_width": 8, "method": 1, "round_mode": 1, "symmetry": true, "per_channel": false, "channel_axis": -1, "unsigned": false, "narrow_range": false}
          }
        ]
      },

      {
        "layer_type": "tensorflow.keras.layers.Dense",
        "quantizable_weights": ["kernel"],
        "weight_quantizers": [
          {
            "quantizer_type": "Pof2SQuantizer",
            "quantizer_params": {"bit_width": 8, "method": 1, "round_mode": 0, "symmetry": true, "per_channel": false, "channel_axis": -1, "unsigned": false, "narrow_range": false}
          }
        ],
        "quantizable_biases": ["bias"],
        "bias_quantizers": [
          {
            "quantizer_type": "Pof2SQuantizer",
            "quantizer_params": {"bit_width": 8, "method": 1, "round_mode": 0, "symmetry": true, "per_channel": false, "channel_axis": -1, "unsigned": false, "narrow_range": false}
          }
        ],
        "quantizable_activations": ["activation"],
        "activation_quantizers": [
          {
            "quantizer_type": "Pof2SQuantizer",
            "quantizer_params": {"bit_width": 8, "method": 1, "round_mode": 1, "symmetry": true, "per_channel": false, "channel_axis": -1, "unsigned": false, "narrow_range": false}
          }
        ]
      },

      {
        "layer_type": "tensorflow.keras.layers.Activation",
        "quantizable_activations": ["activation"],
        "activation_quantizers": [
          {
            "quantizer_type": "Pof2SQuantizer",
            "quantizer_params": {"bit_width": 8, "method": 1, "round_mode": 1, "symmetry": true, "per_channel": false, "channel_axis": -1, "unsigned": false, "narrow_range": false}
          }
        ]
      },

      {
        "layer_type": "tensorflow.keras.layers.ReLU",
        "quantizable_outputs": [0],
        "output_quantizers": [
          {
            "quantizer_type": "Pof2SQuantizer",
            "quantizer_params": {"bit_width": 8, "method": 1, "round_mode": 1, "symmetry": true, "per_channel": false, "channel_axis": -1, "unsigned": false, "narrow_range": false}
          }
        ]
      },

      {
        "layer_type": "tensorflow.keras.layers.LeakyReLU",
        "quantizable_outputs": [0],
        "output_quantizers": [
          {
            "quantizer_type": "Pof2SQuantizer",
            "quantizer_params": {"bit_width": 8, "method": 1, "round_mode": 1, "symmetry": true, "per_channel": false, "channel_axis": -1, "unsigned": false, "narrow_range": false}
          }
        ]
      },

      {
        "layer_type": "tensorflow.keras.layers.PReLU",
        "quantizable_weights": ["alpha"],
        "weight_quantizers": [
          {
            "quantizer_type": "Pof2SQuantizer",
            "quantizer_params": {"bit_width": 8, "method": 1, "round_mode": 0, "symmetry": true, "per_channel": false, "channel_axis": -1, "unsigned": false, "narrow_range": false}
          }
        ],
        "quantizable_outputs": [0],
        "output_quantizers": [
          {
            "quantizer_type": "Pof2SQuantizer",
            "quantizer_params": {"bit_width": 8, "method": 1, "round_mode": 1, "symmetry": true, "per_channel": false, "channel_axis": -1, "unsigned": false, "narrow_range": false}
          }
        ]
      },

      {
        "layer_type": "tensorflow.keras.layers.Add",
        "quantizable_outputs": [0],
        "output_quantizers": [
          {
            "quantizer_type": "Pof2SQuantizer",
            "quantizer_params": {"bit_width": 8, "method": 1, "round_mode": 1, "symmetry": true, "per_channel": false, "channel_axis": -1, "unsigned": false, "narrow_range": false}
          }
        ]
      },

      {
        "layer_type": "tensorflow.keras.layers.BatchNormalization",
        "quantizable_weights": ["gamma", "beta"],
        "weight_quantizers": [
          {
            "quantizer_type": "Pof2SQuantizer",
            "quantizer_params": {"bit_width": 8, "method": 1, "round_mode": 0, "symmetry": true, "per_channel": false, "channel_axis": -1, "unsigned": false, "narrow_range": false}
          },
          {
            "quantizer_type": "Pof2SQuantizer",
            "quantizer_params": {"bit_width": 8, "method": 1, "round_mode": 0, "symmetry": true, "per_channel": false, "channel_axis": -1, "unsigned": false, "narrow_range": false}
          }
        ],
        "quantizable_outputs": [0],
        "output_quantizers": [
          {
            "quantizer_type": "Pof2SQuantizer",
            "quantizer_params": {"bit_width": 8, "method": 1, "round_mode": 1, "symmetry": true, "per_channel": false, "channel_axis": -1, "unsigned": false, "narrow_range": false}
          }
        ]
      },

      {
        "layer_type": "tensorflow.keras.layers.MaxPooling2D",
        "quantizable_outputs": [0],
        "output_quantizers": [
          {
            "quantizer_type": "Pof2SQuantizer",
            "quantizer_params": {"bit_width": 8, "method": 1, "round_mode": 1, "symmetry": true, "per_channel": false, "channel_axis": -1, "unsigned": false, "narrow_range": false}
          }
        ]
      },

      {
        "layer_type": "tensorflow.keras.layers.AveragePooling2D",
        "quantizable_outputs": [0],
        "output_quantizers": [
          {
            "quantizer_type": "Pof2SQuantizer",
            "quantizer_params": {"bit_width": 8, "method": 1, "round_mode": 1, "symmetry": true, "per_channel": false, "channel_axis": -1, "unsigned": false, "narrow_range": false}
          }
        ]
      },

      {
        "layer_type": "tensorflow.keras.layers.GlobalAveragePooling2D",
        "quantizable_outputs": [0],
        "output_quantizers": [
          {
            "quantizer_type": "Pof2SQuantizer",
            "quantizer_params": {"bit_width": 8, "method": 1, "round_mode": 1, "symmetry": true, "per_channel": false, "channel_axis": -1, "unsigned": false, "narrow_range": false}
          }
        ]
      },

      {
        "layer_type": "tensorflow.keras.layers.UpSampling2D",
        "quantizable_outputs": [0],
        "output_quantizers": [
          {
            "quantizer_type": "Pof2SQuantizer",
            "quantizer_params": {"bit_width": 8, "method": 1, "round_mode": 1, "symmetry": true, "per_channel": false, "channel_axis": -1, "unsigned": false, "narrow_range": false}
          }
        ]
      },

      {
        "layer_type": "tensorflow.keras.layers.Concatenate",
        "quantizable_outputs": [0],
        "output_quantizers": [
          {
            "quantizer_type": "Pof2SQuantizer",
            "quantizer_params": {"bit_width": 8, "method": 1, "round_mode": 1, "symmetry": true, "per_channel": false, "channel_axis": -1, "unsigned": false, "narrow_range": false}
          }
        ]
      },

      {
        "layer_type": "tensorflow.keras.layers.ZeroPadding2D"
      },

      {
        "layer_type": "tensorflow.keras.layers.Reshape"
      },

      {
        "layer_type": "tensorflow.keras.layers.Flatten"
      },

      {
        "layer_type": "tensorflow.keras.layers.Multiply",
        "quantizable_outputs": [0],
        "output_quantizers": [
          {
            "quantizer_type": "Pof2SQuantizer",
            "quantizer_params": {"bit_width": 8, "method": 1, "round_mode": 1, "symmetry": true, "per_channel": false, "channel_axis": -1, "unsigned": false, "narrow_range": false}
          }
        ]
      },

      {
        "layer_type": "tensorflow_model_optimization.python.core.quantization.keras.vitis.layers.vitis_pooling.VitisGlobalAveragePooling2D",
        "quantizable_outputs": [0],
        "output_quantizers": [
          {
            "quantizer_type": "Pof2SQuantizer",
            "quantizer_params": {"bit_width": 8, "method": 1, "round_mode": 1, "symmetry": true, "per_channel": false, "channel_axis": -1, "unsigned": false, "narrow_range": false}
          }
        ]
      },

      {
        "layer_type": "tensorflow_model_optimization.python.core.quantization.keras.vitis.layers.vitis_pooling.VitisAveragePooling2D",
        "quantizable_outputs": [0],
        "output_quantizers": [
          {
            "quantizer_type": "Pof2SQuantizer",
            "quantizer_params": {"bit_width": 8, "method": 1, "round_mode": 1, "symmetry": true, "per_channel": false, "channel_axis": -1, "unsigned": false, "narrow_range": false}
          }
        ]
      },

      {
        "layer_type": "tensorflow_model_optimization.python.core.quantization.keras.vitis.layers.vitis_activation.VitisSigmoid",
        "quantizable_outputs": [0],
        "output_quantizers": [
          {
            "quantizer_type": "Pof2SQuantizer",
            "quantizer_params": {"bit_width": 8, "method": 1, "round_mode": 1, "symmetry": true, "per_channel": false, "channel_axis": -1, "unsigned": false, "narrow_range": false}
          }
        ]
      },

      {
        "layer_type": "tensorflow_model_optimization.python.core.quantization.keras.vitis.layers.vitis_conv_bn.VitisConvBN",
        "quantizable_weights": ["kernel"],
        "weight_quantizers": [
          {
            "quantizer_type": "Pof2SQuantizer",
            "quantizer_params": {"bit_width": 8, "method": 1, "round_mode": 0, "symmetry": true, "per_channel": false, "channel_axis": -1, "unsigned": false, "narrow_range": false}
          }
        ],
        "quantizable_biases": ["bias"],
        "bias_quantizers": [
          {
            "quantizer_type": "Pof2SQuantizer",
            "quantizer_params": {"bit_width": 8, "method": 1, "round_mode": 0, "symmetry": true, "per_channel": false, "channel_axis": -1, "unsigned": false, "narrow_range": false}
          }
        ],
        "quantizable_activations": ["activation"],
        "activation_quantizers": [
          {
            "quantizer_type": "Pof2SQuantizer",
            "quantizer_params": {"bit_width": 8, "method": 1, "round_mode": 1, "symmetry": true, "per_channel": false, "channel_axis": -1, "unsigned": false, "narrow_range": false}
          }
        ]
      },

      {
        "layer_type": "tensorflow_model_optimization.python.core.quantization.keras.vitis.layers.vitis_conv_bn.VitisDepthwiseConvBN",
        "quantizable_weights": ["depthwise_kernel"],
        "weight_quantizers": [
          {
            "quantizer_type": "Pof2SQuantizer",
            "quantizer_params": {"bit_width": 8, "method": 1, "round_mode": 0, "symmetry": true, "per_channel": false, "channel_axis": -1, "unsigned": false, "narrow_range": false}
          }
        ],
        "quantizable_biases": ["bias"],
        "bias_quantizers": [
          {
            "quantizer_type": "Pof2SQuantizer",
            "quantizer_params": {"bit_width": 8, "method": 1, "round_mode": 0, "symmetry": true, "per_channel": false, "channel_axis": -1, "unsigned": false, "narrow_range": false}
          }
        ],
        "quantizable_activations": ["activation"],
        "activation_quantizers": [
          {
            "quantizer_type": "Pof2SQuantizer",
            "quantizer_params": {"bit_width": 8, "method": 1, "round_mode": 1, "symmetry": true, "per_channel": false, "channel_axis": -1, "unsigned": false, "narrow_range": false}
          }
        ]
      }
    ]
  }
}
